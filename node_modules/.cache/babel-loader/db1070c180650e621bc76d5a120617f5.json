{"ast":null,"code":"var _jsxFileName = \"/Users/simonsundin/Documents/GitHub/hero-ify/src/signin/signInView.js\";\nimport React, { Component } from 'react';\nimport Spotify from 'spotify-web-api-js';\nimport { Button } from 'react-bootstrap';\nimport { Link } from 'react-router-dom';\nconst spotifyApi = new Spotify();\nconst h = React.createElement;\nexport default class SignInView extends Component {\n  constructor(props) {\n    super(props);\n    const token = this.getHashParams().access_token;\n\n    if (token) {\n      spotifyApi.setAccessToken(token);\n    }\n\n    this.state = {\n      loggedIn: token ? true : false,\n      nowPlaying: {\n        name: 'Not Checked',\n        albumArt: ''\n      },\n      topTracks: []\n    };\n  }\n\n  getHashParams() {\n    var hashParams = {};\n    var e,\n        r = /([^&;=]+)=?([^&;]*)/g,\n        q = window.location.hash.substring(1);\n    e = r.exec(q);\n\n    while (e) {\n      hashParams[e[1]] = decodeURIComponent(e[2]);\n      e = r.exec(q);\n    }\n\n    return hashParams;\n  }\n\n  getNowPlaying() {\n    spotifyApi.getMyCurrentPlaybackState().then(response => {\n      this.setState({\n        nowPlaying: {\n          name: response.item.name,\n          albumArt: response.item.album.images[0].url\n        }\n      });\n    });\n  }\n\n  getMyTopTracks() {\n    var alltrackstoptracks = [];\n    spotifyApi.getMyTopTracks({\n      limit: 100\n    }).then(response => {\n      for (var i = 0, l = response.items.length; i < l; i++) {\n        alltrackstoptracks.push(response.items[i]);\n      }\n\n      this.setState({\n        topTracks: alltrackstoptracks\n      });\n    });\n  }\n\n  hideAllResponses() {\n    if (this.state.loggedIn === true) {\n      document.getElementById(\"loggedout\").classList.add('hide');\n      document.getElementById(\"loggedin\").classList.remove('hide');\n    }\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"intro\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"centered\",\n      id: \"intro\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, \"Heroify\"), React.createElement(Button, {\n      variant: \"btn btn-success btn-lg\",\n      class: \"btn btn-success btn-lrg\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      class: \"white\",\n      href: \"http://localhost:8888/login\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, \" LET'S START \"))));\n  }\n\n}","map":{"version":3,"sources":["/Users/simonsundin/Documents/GitHub/hero-ify/src/signin/signInView.js"],"names":["React","Component","Spotify","Button","Link","spotifyApi","h","createElement","SignInView","constructor","props","token","getHashParams","access_token","setAccessToken","state","loggedIn","nowPlaying","name","albumArt","topTracks","hashParams","e","r","q","window","location","hash","substring","exec","decodeURIComponent","getNowPlaying","getMyCurrentPlaybackState","then","response","setState","item","album","images","url","getMyTopTracks","alltrackstoptracks","limit","i","l","items","length","push","hideAllResponses","document","getElementById","classList","add","remove","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport Spotify from 'spotify-web-api-js'\nimport { Button } from 'react-bootstrap'\nimport {Link} from 'react-router-dom';\n\nconst spotifyApi = new Spotify()\nconst h = React.createElement\n\nexport default class SignInView extends Component {\n  constructor (props) {\n    super(props)\n    const token = this.getHashParams().access_token\n    if (token) {\n      spotifyApi.setAccessToken(token)\n    }\n    this.state = {\n      loggedIn: token ? true : false,\n      nowPlaying: { name: 'Not Checked', albumArt: '' },\n      topTracks: []\n    }\n  }\n\n  getHashParams () {\n    var hashParams = {}\n    var e, r = /([^&;=]+)=?([^&;]*)/g,\n    q = window.location.hash.substring(1)\n    e = r.exec(q)\n    while (e) {\n      hashParams[e[1]] = decodeURIComponent(e[2])\n      e = r.exec(q)\n    }\n    return hashParams\n  }\n\n  getNowPlaying () {\n    spotifyApi.getMyCurrentPlaybackState().then((response) => {\n      this.setState({\n        nowPlaying: {\n          name: response.item.name,\n          albumArt: response.item.album.images[0].url\n        }\n      })\n    })\n  }\n\n  getMyTopTracks () {\n    var alltrackstoptracks = []\n    spotifyApi.getMyTopTracks({ limit: 100 }).then(response => {\n      for (var i = 0, l = response.items.length; i < l; i++) {\n        alltrackstoptracks.push(response.items[i])\n      }\n      this.setState({\n        topTracks: alltrackstoptracks\n      })\n    })\n  }\n\n  hideAllResponses () {\n    if (this.state.loggedIn === true) {\n      document.getElementById(\"loggedout\").classList.add('hide')\n      document.getElementById(\"loggedin\").classList.remove('hide')\n    }\n  }\n\n  render () {\n    return (\n      <div className='intro'>\n        <div class='centered' id=\"intro\">\n        <h1>Heroify</h1>\n          {<Button variant=\"btn btn-success btn-lg\" class=\"btn btn-success btn-lrg\">\n            <a class = \"white\" href='http://localhost:8888/login'> LET'S START </a>\n          </Button>}\n        </div>\n      </div>\n    )\n  }\n}\n"]},"metadata":{},"sourceType":"module"}