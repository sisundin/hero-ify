{"ast":null,"code":"var _jsxFileName = \"/Users/simonsundin/Documents/GitHub/hero-ify/src/signin/signInView.js\";\nimport React, { Component } from 'react';\nimport Spotify from 'spotify-web-api-js';\nimport { Button } from 'react-bootstrap';\nimport { Link } from 'react-router-dom';\nimport ChooseHero from '../choosehero/chooseHero';\nconst spotifyApi = new Spotify();\nconst h = React.createElement;\nexport default class SignInView extends Component {\n  constructor(params) {\n    super(params);\n    const token = this.getHashParams().access_token;\n\n    if (token) {\n      spotifyApi.setAccessToken(token);\n    }\n\n    this.state = {\n      loggedIn: token ? true : false,\n      nowPlaying: {\n        name: 'Not Checked',\n        albumArt: ''\n      },\n      topTracks: []\n    };\n  }\n\n  getHashParams() {\n    var hashParams = {};\n    var e,\n        r = /([^&;=]+)=?([^&;]*)/g,\n        q = window.location.hash.substring(1);\n    e = r.exec(q);\n\n    while (e) {\n      hashParams[e[1]] = decodeURIComponent(e[2]);\n      e = r.exec(q);\n    }\n\n    return hashParams;\n  }\n\n  getNowPlaying() {\n    spotifyApi.getMyCurrentPlaybackState().then(response => {\n      this.setState({\n        nowPlaying: {\n          name: response.item.name,\n          albumArt: response.item.album.images[0].url\n        }\n      });\n    });\n  }\n\n  getMyTopTracks() {\n    var alltrackstoptracks = [];\n    spotifyApi.getMyTopTracks({\n      limit: 100\n    }).then(response => {\n      for (var i = 0, l = response.items.length; i < l; i++) {\n        alltrackstoptracks.push(response.items[i]);\n      }\n\n      this.setState({\n        topTracks: alltrackstoptracks\n      });\n    });\n  }\n\n  hideAllResponses() {\n    if (this.state.loggedIn === true) {\n      document.getElementById(\"loggedout\").classList.add('hide');\n      document.getElementById(\"loggedin\").classList.remove('hide');\n    }\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"App\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      id: \"loggedout\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, !this.state.loggedIn && React.createElement(Button, {\n      variant: \"outline-primary\",\n      class: \"btn btn-secondary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      href: \"http://localhost:8888\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, \" Login to Spotify \")), this.state.loggedIn && React.createElement(Link, {\n      to: \"/choosehero\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, React.createElement(Button, {\n      variant: \"secondary\",\n      class: \"next\",\n      onClick: () => {\n        document.getElementById(\"home\").classList.add('hide');\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, \"NEXT\")), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, \" You are logged in!\"), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, \"Click NEXT to choose your hero\")), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"App hide\",\n      id: \"loggedin\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, \"You are now logged in click next to choose your super hero\"), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, \"Now Playing: \", this.state.nowPlaying.name), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: this.state.nowPlaying.albumArt,\n      style: {\n        height: 150\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, this.state.loggedIn && React.createElement(Button, {\n      variant: \"primary\",\n      onClick: () => this.getNowPlaying(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, \"Check Now Playing\"), this.state.loggedIn && React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, \" (Play a song on Spotify and press the button) \")), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, this.state.loggedIn && React.createElement(Button, {\n      variant: \"outline-dark mr-1\",\n      onClick: () => this.getMyTopTracks(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, \"Click here see your recent top tracks\")), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, this.state.loggedIn && React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, \" Recent top tracks: \", this.state.topTracks.map(track => h('ul', {}, h('li', {\n      id: 'list'\n    }, track.name))), \" \")));\n  }\n\n}","map":{"version":3,"sources":["/Users/simonsundin/Documents/GitHub/hero-ify/src/signin/signInView.js"],"names":["React","Component","Spotify","Button","Link","ChooseHero","spotifyApi","h","createElement","SignInView","constructor","params","token","getHashParams","access_token","setAccessToken","state","loggedIn","nowPlaying","name","albumArt","topTracks","hashParams","e","r","q","window","location","hash","substring","exec","decodeURIComponent","getNowPlaying","getMyCurrentPlaybackState","then","response","setState","item","album","images","url","getMyTopTracks","alltrackstoptracks","limit","i","l","items","length","push","hideAllResponses","document","getElementById","classList","add","remove","render","height","map","track","id"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport Spotify from 'spotify-web-api-js'\nimport { Button } from 'react-bootstrap'\nimport {Link} from 'react-router-dom';\n\nimport ChooseHero from '../choosehero/chooseHero'\nconst spotifyApi = new Spotify()\nconst h = React.createElement\n\nexport default class SignInView extends Component {\n  constructor (params) {\n    super(params)\n    const token = this.getHashParams().access_token\n    if (token) {\n      spotifyApi.setAccessToken(token)\n    }\n    this.state = {\n      loggedIn: token ? true : false,\n      nowPlaying: { name: 'Not Checked', albumArt: '' },\n      topTracks: []\n    }\n  }\n\n  getHashParams () {\n    var hashParams = {}\n    var e, r = /([^&;=]+)=?([^&;]*)/g,\n    q = window.location.hash.substring(1)\n    e = r.exec(q)\n    while (e) {\n      hashParams[e[1]] = decodeURIComponent(e[2])\n      e = r.exec(q)\n    }\n    return hashParams\n  }\n\n  getNowPlaying () {\n    spotifyApi.getMyCurrentPlaybackState().then((response) => {\n      this.setState({\n        nowPlaying: {\n          name: response.item.name,\n          albumArt: response.item.album.images[0].url\n        }\n      })\n    })\n  }\n\n  getMyTopTracks () {\n    var alltrackstoptracks = []\n    spotifyApi.getMyTopTracks({ limit: 100 }).then(response => {\n      for (var i = 0, l = response.items.length; i < l; i++) {\n        alltrackstoptracks.push(response.items[i])\n      }\n      this.setState({\n        topTracks: alltrackstoptracks\n      })\n    })\n  }\n\n  hideAllResponses () {\n    if (this.state.loggedIn === true) {\n      document.getElementById(\"loggedout\").classList.add('hide')\n      document.getElementById(\"loggedin\").classList.remove('hide')\n    }\n  }\n\n  render () {\n    return (\n      <div className='App'>\n        <div id='loggedout'>\n        {!this.state.loggedIn && <Button variant=\"outline-primary\" class=\"btn btn-secondary\">\n            <a href='http://localhost:8888'> Login to Spotify </a>\n          </Button>}\n          \n          {this.state.loggedIn &&\n            <Link to=\"/choosehero\"> \n              <Button variant='secondary' class=\"next\" onClick={() =>{ \n                document.getElementById(\"home\").classList.add('hide');\n                }}>\n                  NEXT \n              </Button>\n            </Link>       \n          }\n\n          <p> You are logged in!</p>\n          <p>Click NEXT to choose your hero</p>\n        </div>\n        <div>\n      </div>\n        <div className='App hide' id='loggedin'>\n        You are now logged in click next to choose your super hero\n        </div>\n        <div>\n          Now Playing: {this.state.nowPlaying.name}\n        </div>\n        <div>\n          <img src={this.state.nowPlaying.albumArt} style={{ height: 150 }} />\n        </div>\n        <div>\n          {this.state.loggedIn &&\n            <Button variant='primary' onClick={() => this.getNowPlaying()}>\n              Check Now Playing\n            </Button>\n          }\n          {this.state.loggedIn && <p> (Play a song on Spotify and press the button) </p>}\n        </div>\n\n        <div>\n          {this.state.loggedIn &&\n            <Button variant='outline-dark mr-1' onClick={() => this.getMyTopTracks()}>\n              Click here see your recent top tracks\n            </Button>}\n        </div>\n        <div>\n          {this.state.loggedIn && <p> Recent top tracks: {this.state.topTracks.map(track => h('ul', {}, h('li', {id: 'list'}, track.name)))} </p>}\n        </div>\n      </div>\n    )\n  }\n}\n"]},"metadata":{},"sourceType":"module"}