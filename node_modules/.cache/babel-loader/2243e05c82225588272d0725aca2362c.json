{"ast":null,"code":"import React from \"react\";\nimport { heroApiENDPOINT, HeroApiAccessToken, firebaseConfig } from \"./apiConfig\";\nimport firebase from \"firebase\";\n\nclass HeroIfyModel extends React.Component {\n  constructor() {\n    super();\n    this.subscribers = [];\n    this.playlistAttributes = {\n      userID: \"\",\n      genres: [],\n      pepLevel: \"\"\n    };\n    this.firebase = new firebase.initializeApp(firebaseConfig);\n    this.db = this.firebase.firestore();\n  }\n\n  addObserver(callback) {\n    this.subscribers.push(callback);\n  }\n\n  removeObserver(callback) {\n    callback = this.subscribers.filter(o => o !== callback);\n  }\n\n  notifyObservers(whatHappened) {\n    this.subscribers.forEach(function (callback) {\n      callback(whatHappened);\n    });\n  }\n\n  getHeroData(string) {\n    headers = [];\n    headers.append('Access-Control-Allow-Origin', 'http://localhost:3000');\n    headers.append('Access-Control-Allow-Credentials', 'true');\n    return fetch(heroApiENDPOINT + HeroApiAccessToken + string, {\n      \"method\": \"GET\"\n    }).then(response => this.handleHTTPError(response)).then(response => response.json()).catch(error => console.log(error));\n  }\n\n  handleHTTPError(response) {\n    if (response.ok) return response;\n    throw Error(response.statusText);\n  }\n\n  searchHero(name) {\n    let data = this.getHeroData(\"search/\" + name);\n    console.log(data);\n    return data;\n  }\n\n  getHeroStats(id) {\n    let herostats = this.getHeroData(id + \"/powerstats\");\n    let image = this.getHeroData(id + \"/image\");\n    let stats = {\n      \"powerstats\": herostats,\n      \"image\": image\n    };\n    return stats;\n  }\n\n  heroGenres(powerstats) {\n    powerstats = {\n      \"intelligence\": \"81\",\n      \"strength\": \"40\",\n      \"speed\": \"29\",\n      \"durability\": \"55\",\n      \"power\": \"63\",\n      \"combat\": \"90\"\n    };\n    let allstats = powerstats.intelligence + powerstats.strength + powerstats.speed + powerstats.durability + powerstats.combat;\n    let genres = {\n      \"classical\": powerstats.intelligence / allstats,\n      \"punk\": powerstats.strength / allstats,\n      \"pop\": powerstats.speed / allstats,\n      \"lowfy beats\": powerstats.durability / allstats,\n      \"electronic dance\": powerstats.power / allstats,\n      \"hip hop\": powerstats.combat / allstats\n    };\n    return genres;\n  } //getPlaylists NEEDS RENDER PROMIS\n\n\n  getOthersPlaylistsfromdatabase() {\n    let scoreboard = [];\n    this.db.collection(\"created playlists\").orderBy(\"score\", \"desc\").limit(10).get().then(snapshot => {\n      snapshot.forEach(doc => {\n        scoreboard.push({\n          \"Hero\": doc.Hero,\n          \"PlaylistLink\": doc.PlaylistLink,\n          \"User\": doc.User\n        });\n      });\n    });\n  } //add a playlist to firebase\n\n\n  addYourplaylistToDatabase(heroname, playlistlink, user) {\n    this.db.collection(\"created playlists\").doc().set({\n      Hero: heroname,\n      PlaylistLink: playlistlink,\n      User: user\n    });\n  } //spotify playlist function\n\n\n  spotifyApiConnect() {} //generates a link to create spotify playlist from\n\n\n  generateSpotifyPlaylist() {}\n\n}\n\nconst heroifyModel = new HeroIfyModel();\nexport default heroifyModel;","map":{"version":3,"sources":["/Users/simonsundin/Documents/GitHub/hero-ify/src/modelandconfig/model.js"],"names":["React","heroApiENDPOINT","HeroApiAccessToken","firebaseConfig","firebase","HeroIfyModel","Component","constructor","subscribers","playlistAttributes","userID","genres","pepLevel","initializeApp","db","firestore","addObserver","callback","push","removeObserver","filter","o","notifyObservers","whatHappened","forEach","getHeroData","string","headers","append","fetch","then","response","handleHTTPError","json","catch","error","console","log","ok","Error","statusText","searchHero","name","data","getHeroStats","id","herostats","image","stats","heroGenres","powerstats","allstats","intelligence","strength","speed","durability","combat","power","getOthersPlaylistsfromdatabase","scoreboard","collection","orderBy","limit","get","snapshot","doc","Hero","PlaylistLink","User","addYourplaylistToDatabase","heroname","playlistlink","user","set","spotifyApiConnect","generateSpotifyPlaylist","heroifyModel"],"mappings":"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","sourcesContent":["import React  from \"react\";\nimport {heroApiENDPOINT, HeroApiAccessToken, firebaseConfig} from \"./apiConfig\"\nimport firebase from \"firebase\";\n\nclass HeroIfyModel extends React.Component{\n    constructor(){\n        super();\n        \n        this.subscribers=[];\n        this.playlistAttributes = {userID:\"\", genres: [], pepLevel:\"\" }\n        this.firebase = new firebase.initializeApp(firebaseConfig);\n        this.db = this.firebase.firestore();\n        }\n        \n    addObserver(callback){\n        this.subscribers.push(callback);\n }\n\n    removeObserver (callback) {\n    callback = this.subscribers.filter(o => o !== callback);\n    };\n   \n    notifyObservers(whatHappened){\n        this.subscribers.forEach(function(callback){ \n            callback(whatHappened);\n       });\n    }\n       \n    getHeroData(string) {\n        headers = []\n        headers.append('Access-Control-Allow-Origin', 'http://localhost:3000');\n        headers.append('Access-Control-Allow-Credentials', 'true');\n        return fetch (heroApiENDPOINT+HeroApiAccessToken+string, {\n            \"method\": \"GET\",\n                       \n\n    }).then(response => this.handleHTTPError(response))\n        .then(response => response.json())\n        .catch(error => console.log(error));\n         \n    }\n\n    handleHTTPError(response) {\n        if(response.ok)\n           return response;\n        throw Error(response.statusText);\n      }\n\n    searchHero(name){\n        let data = this.getHeroData(\"search/\"+name);\n        console.log(data);\n        return data;\n    }\n\n    getHeroStats(id){\n        let herostats = this.getHeroData(id + \"/powerstats\");\n        let image = this.getHeroData(id+\"/image\");\n        let stats = {\"powerstats\" : herostats, \"image\": image };\n        return stats\n    }\n\n    heroGenres(powerstats){\n        powerstats = {\"intelligence\":\"81\",\"strength\":\"40\",\"speed\":\"29\",\"durability\":\"55\",\"power\":\"63\",\"combat\":\"90\"};\n        let allstats = powerstats.intelligence + powerstats.strength + powerstats.speed + powerstats.durability + powerstats.combat;\n        let genres = { \"classical\": powerstats.intelligence/allstats, \"punk\":powerstats.strength/allstats, \"pop\": powerstats.speed/allstats , \"lowfy beats\": powerstats.durability/allstats, \"electronic dance\": powerstats.power/allstats, \"hip hop\": powerstats.combat/allstats};\n        return genres;\n    }\n\n    //getPlaylists NEEDS RENDER PROMIS\n    getOthersPlaylistsfromdatabase(){\n        let scoreboard = []\n        this.db.collection(\"created playlists\").orderBy(\"score\", \"desc\").limit(10).get().then((snapshot) => {\n            snapshot.forEach((doc) => {\n                scoreboard.push({\"Hero\": doc.Hero , \"PlaylistLink\": doc.PlaylistLink , \"User\": doc.User})\n            })\n        });\n    }\n\n    //add a playlist to firebase\n    addYourplaylistToDatabase(heroname, playlistlink, user){\n        this.db.collection(\"created playlists\").doc().set({\n            Hero: heroname,\n            PlaylistLink: playlistlink,\n            User: user\n            \n    });\n}\n    \n   //spotify playlist function\n    spotifyApiConnect(){\n\n    }\n    //generates a link to create spotify playlist from\n    generateSpotifyPlaylist(){\n\n    }\n    \n}\n\nconst heroifyModel = new HeroIfyModel();\nexport default heroifyModel;"]},"metadata":{},"sourceType":"module"}